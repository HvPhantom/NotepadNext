# –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ NotepadNext - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 19 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–æ—Å—Ç—å**: Windows, Linux, macOS

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1Ô∏è‚É£ PluginManager.cpp (500+ —Å—Ç—Ä–æ–∫)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–ª–∞–≥–∏–Ω–æ–≤
- ‚úÖ –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø–ª–∞–≥–∏–Ω—ã
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–ø—Ä–æ–≤–µ—Ä–∫–∞ [min, max])
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤ (JSON —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø–ª–∞–≥–∏–Ω–æ–≤
- ‚úÖ Plugin-to-plugin IPC (–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –º–µ–∂–¥—É –ø–ª–∞–≥–∏–Ω–∞–º–∏)

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
```cpp
bool initialize(ScintillaNext *editor)
void finalize()
void loadPluginsFromDirectory(const QString &path)
bool loadPlugin(const QString &path)
void unloadPlugin(const QString &pluginName)
void reloadPlugin(const QString &pluginName)
bool executeCommand(const QString &commandId)
QString callPluginFunction(...)

// –°–æ–±—ã—Ç–∏—è
void notifyReady()
void notifyAfterFileOpen(filename)
void notifyAfterFileSave(filename)
void notifyBeforeFileClose(filename)
void notifyShutdown()
```

---

### 2Ô∏è‚É£ PluginAPI.cpp (400+ —Å—Ç—Ä–æ–∫ Lua API)

**–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—ã–µ –º–æ–¥—É–ª–∏**:

#### plugin.* (7 —Ñ—É–Ω–∫—Ü–∏–π)
```lua
plugin.info()              -- –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞–≥–∏–Ω–µ
plugin.getConfig()         -- –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
plugin.saveConfig(table)   -- —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
plugin.getRootPath()       -- –ø—É—Ç—å –∫ –ø–ª–∞–≥–∏–Ω—É
plugin.registerCommand()   -- –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –º–µ–Ω—é
plugin.on(event, callback) -- –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è
plugin.call(name, func)    -- –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥—Ä—É–≥–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
plugin.log(msg)            -- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

#### ui.* (6 —Ñ—É–Ω–∫—Ü–∏–π)
```lua
ui.message(title, text)    -- –ø—Ä–æ—Å—Ç–æ–π –¥–∏–∞–ª–æ–≥
ui.confirm(title, text)    -- –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
ui.input(label, default)   -- –¥–∏–∞–ª–æ–≥ –≤–≤–æ–¥–∞
ui.select(items, default)  -- –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞
ui.getClipboard()          -- –ø–æ–ª—É—á–∏—Ç—å –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
ui.setClipboard(text)      -- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
```

#### fs.* (11 —Ñ—É–Ω–∫—Ü–∏–π)
```lua
fs.read(path)              -- –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª
fs.write(path, data)       -- –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª
fs.append(path, data)      -- –¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ñ–∞–π–ª
fs.exists(path)            -- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
fs.isFile(path)            -- —ç—Ç–æ —Ñ–∞–π–ª?
fs.isDirectory(path)       -- —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è?
fs.mkdir(path)             -- —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
fs.listdir(path)           -- —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
fs.realpath(path)          -- –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
fs.basename(path)          -- –∏–º—è —Ñ–∞–π–ª–∞
fs.dirname(path)           -- –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
fs.join(...)               -- –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø—É—Ç–∏
```

#### settings.* (4 —Ñ—É–Ω–∫—Ü–∏–∏)
```lua
settings.get(key)          -- –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
settings.set(key, value)   -- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
settings.has(key)          -- –∫–ª—é—á —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
settings.remove(key)       -- —É–¥–∞–ª–∏—Ç—å –∫–ª—é—á
```

#### editor.* (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π API)
```lua
editor:getCurrentFile()    -- —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª
editor:openFile(filename)  -- –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
editor:saveFile()          -- —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
editor:closeFile(filename) -- –∑–∞–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
-- –ø–ª—é—Å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –∏–∑ IFaceTable
```

---

### 3Ô∏è‚É£ –ß–µ—Ç—ã—Ä–µ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–∞

#### ComparePlus ‚úÖ
**–§–∞–π–ª—ã**: 
- `examples/ComparePlus/manifest.json`
- `examples/ComparePlus/init.lua`

**–§—É–Ω–∫—Ü–∏–∏**:
- –í—ã–±—Ä–∞—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –°—Ä–∞–≤–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å diff –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º
- –°—Ä–∞–≤–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- –ù–∞–π—Ç–∏ —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏
- Highlight —Ä–∞–∑–ª–∏—á–∏–π

**–ö–æ–º–∞–Ω–¥—ã** (—Å –≥–æ—Ä—è—á–∏–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏):
- `Ctrl+Alt+1` - Select First File
- `Ctrl+Alt+2` - Select Second File
- `Ctrl+Alt+3` - Compare Files
- `Ctrl+Shift+Alt+C` - Compare Selections

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- –ü—Ä–æ—Å—Ç–æ–π diff –∞–ª–≥–æ—Ä–∏—Ç–º (O(n) —Å–ª–æ–∂–Ω–æ—Å—Ç—å)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–∞–∑–ª–∏—á–∏—è—Ö

---

#### Converter ‚úÖ
**–§–∞–π–ª—ã**:
- `examples/Converter/manifest.json`
- `examples/Converter/init.lua`

**–§—É–Ω–∫—Ü–∏–∏**:
- Base64 encode/decode
- Hex encode/decode
- URL encode/decode
- UPPERCASE / lowercase
- Swap case
- camelCase –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

**–ö–æ–º–∞–Ω–¥—ã**:
- `Ctrl+Shift+B` - Base64 Encode
- `Ctrl+Shift+U` - To UPPERCASE
- `Ctrl+Shift+L` - To lowercase
- –ï—â—ë 6+ –∫–æ–º–∞–Ω–¥

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –∏–ª–∏ —Å–æ –≤—Å–µ–º —Ç–µ–∫—Å—Ç–æ–º
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

#### NppExport ‚úÖ
**–§–∞–π–ª—ã**:
- `examples/NppExport/manifest.json`
- `examples/NppExport/init.lua`

**–§—É–Ω–∫—Ü–∏–∏**:
- Export to HTML (—Å line numbers)
- Export to RTF (—Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- Export to LaTeX (–≥–æ—Ç–æ–≤—ã–π –∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- Export to JSON (—Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏)

**–ö–æ–º–∞–Ω–¥—ã**:
- `Ctrl+Alt+H` - Export as HTML
- Export as RTF
- Export as LaTeX
- Export as JSON

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- HTML —Å –±–ª–æ–∫–æ–º —Å—Ç–∏–ª–µ–π (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥—Å–≤–µ—Ç–∫–µ)
- RTF —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —à—Ä–∏—Ñ—Ç–∞
- LaTeX —Å –ø–∞–∫–µ—Ç–æ–º listings
- JSON —Å –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π (—Å—Ç—Ä–æ–∫–∏, —Å–∏–º–≤–æ–ª—ã)

---

#### MIMETools ‚úÖ
**–§–∞–π–ª—ã**:
- `examples/MIMETools/manifest.json`
- `examples/MIMETools/init.lua`

**–§—É–Ω–∫—Ü–∏–∏**:
- Quoted-Printable encode/decode
- Uuencode encode/decode
- MIME type detection –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞
- Email header decoding (RFC 2047)

**–ö–æ–º–∞–Ω–¥—ã**:
- `Ctrl+Alt+Q` - Decode Quoted-Printable
- Encode Quoted-Printable
- Decode/Encode UUencode
- Detect MIME Type
- Decode Email Headers

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ RFC 2045-2049 (MIME)
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ 30+ —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
- RFC 2047 –¥–ª—è email headers

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/NotepadNext/
‚îú‚îÄ‚îÄ PluginManager.h         (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
‚îú‚îÄ‚îÄ PluginManager.cpp       (NEW - 500 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ PluginAPI.cpp           (NEW - 400 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ LuaExtension.h          (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
‚îî‚îÄ‚îÄ LuaExtension.cpp        (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

examples/
‚îú‚îÄ‚îÄ SamplePlugin/           (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ manifest.json
‚îÇ   ‚îî‚îÄ‚îÄ init.lua
‚îú‚îÄ‚îÄ ComparePlus/            (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ manifest.json
‚îÇ   ‚îî‚îÄ‚îÄ init.lua
‚îú‚îÄ‚îÄ Converter/              (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ manifest.json
‚îÇ   ‚îî‚îÄ‚îÄ init.lua
‚îú‚îÄ‚îÄ NppExport/              (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ manifest.json
‚îÇ   ‚îî‚îÄ‚îÄ init.lua
‚îî‚îÄ‚îÄ MIMETools/              (NEW)
    ‚îú‚îÄ‚îÄ manifest.json
    ‚îî‚îÄ‚îÄ init.lua

docs/
‚îú‚îÄ‚îÄ PLUGIN_SYSTEM_ANALYSIS.md           (–∞–Ω–∞–ª–∏–∑ Notepad++ vs NotepadNext)
‚îú‚îÄ‚îÄ PLUGIN_ADAPTATION_GUIDE.md          (–∫–∞–∫ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã)
‚îú‚îÄ‚îÄ PLUGIN_IMPLEMENTATION_ROADMAP.md    (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω)
‚îî‚îÄ‚îÄ PLUGIN_INTEGRATION_GUIDE.md         (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞**:
   ```bash
   # Linux/macOS
   mkdir -p ~/.local/share/NotepadNext/plugins/MyPlugin
   cp MyPlugin/* ~/.local/share/NotepadNext/plugins/MyPlugin/
   
   # Windows
   mkdir %APPDATA%\NotepadNext\plugins\MyPlugin
   copy MyPlugin\* %APPDATA%\NotepadNext\plugins\MyPlugin\
   ```

2. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ –º–µ–Ω—é `Plugins`**

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

1. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–ª–∞–≥–∏–Ω–∞**:
   ```bash
   mkdir MyPlugin
   cd MyPlugin
   touch manifest.json init.lua
   ```

2. **manifest.json**:
   ```json
   {
     "name": "MyPlugin",
     "version": "1.0.0",
     "description": "My plugin",
     "entry": "init.lua",
     "commands": [
       {
         "id": "myplugin.cmd1",
         "title": "Do Something",
         "keybinding": "ctrl+alt+m"
       }
     ]
   }
   ```

3. **init.lua**:
   ```lua
   local plugin = {}
   
   function executeCommand_cmd1()
       ui.message("Title", "Hello!")
   end
   
   return plugin
   ```

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### PluginManager.h (—É–∂–µ –≥–æ—Ç–æ–≤)
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –æ–±—ä—è–≤–ª–µ–Ω—ã
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ Doxygen
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### PluginManager.cpp (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
- ‚úÖ 500+ —Å—Ç—Ä–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ qDebug

### PluginAPI.cpp (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
- ‚úÖ 40+ Lua —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Lua
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –≤—ã–∑–æ–≤—É –∏–∑ PluginManager

### –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ MainWindow

**–§–∞–π–ª**: `src/NotepadNext/dialogs/MainWindow.cpp`

–î–æ–±–∞–≤–∏—Ç—å:
```cpp
#include "PluginManager.h"

// –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
void MainWindow::initializePluginSystem() {
    PluginManager::instance().initialize(editor);
    QString pluginsPath = QStandardPaths::writableLocation(
        QStandardPaths::AppDataLocation) + "/plugins";
    PluginManager::instance().loadPluginsFromDirectory(pluginsPath);
}

// –ü—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö
void MainWindow::onFileOpened(const QString &filename) {
    PluginManager::instance().notifyAfterFileOpen(filename);
}

void MainWindow::onApplicationReady() {
    PluginManager::instance().notifyReady();
}

// –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
void MainWindow::closeEvent(QCloseEvent *event) {
    PluginManager::instance().notifyShutdown();
    // ... rest of code
}
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | LOC | –°—Ç–∞—Ç—É—Å |
|-----------|-----|--------|
| PluginManager.cpp | 530 | ‚úÖ –ì–æ—Ç–æ–≤ |
| PluginAPI.cpp | 420 | ‚úÖ –ì–æ—Ç–æ–≤ |
| ComparePlus | 150 | ‚úÖ –ì–æ—Ç–æ–≤ |
| Converter | 180 | ‚úÖ –ì–æ—Ç–æ–≤ |
| NppExport | 220 | ‚úÖ –ì–æ—Ç–æ–≤ |
| MIMETools | 180 | ‚úÖ –ì–æ—Ç–æ–≤ |
| **–ò–¢–û–ì–û** | **1680** | **‚úÖ –ì–û–¢–û–í–û** |

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–æ—Å—Ç—å
- Windows, Linux, macOS –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—É—Ç–µ–π (Qt –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å)
- UTF-8 –≤–µ–∑–¥–µ

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Lua sandbox - –ø–ª–∞–≥–∏–Ω—ã –Ω–µ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ö–∞–∂–¥—ã–π –ø–ª–∞–≥–∏–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º Lua state
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ manifest.json `permissions`

### ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- API –ø–æ—Ö–æ–∂ –Ω–∞ NPAPI, –ª–µ–≥–∫–æ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã Notepad++
- –í—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- –ü–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (–≥–æ—Ç–æ–≤–æ)

### ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
- 4 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö MD –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- API reference —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- –ü–æ—à–∞–≥–æ–≤—ã–µ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã

---

## üéì –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –í—ã–ø–æ–ª–Ω–∏—Ç—å Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

```
1. –í—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –ú–µ–Ω—é: Plugins ‚Üí Converter ‚Üí Base64 Encode
3. –¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤ Base64
4. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Ctrl+Shift+B
```

### –ü—Ä–∏–º–µ—Ä 2: –°—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞

```
1. –û—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–≤—ã–π —Ñ–∞–π–ª
2. Plugins ‚Üí ComparePlus ‚Üí Select First File (Ctrl+Alt+1)
3. –û—Ç–∫—Ä—ã—Ç—å –≤—Ç–æ—Ä–æ–π —Ñ–∞–π–ª
4. Plugins ‚Üí ComparePlus ‚Üí Select Second File (Ctrl+Alt+2)
5. Plugins ‚Üí ComparePlus ‚Üí Compare Files (Ctrl+Alt+3)
6. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—à–∞–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ —Ä–∞–∑–ª–∏—á–∏—è—Ö
```

### –ü—Ä–∏–º–µ—Ä 3: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ HTML

```
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. Plugins ‚Üí NppExport ‚Üí Export as HTML
3. –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ document.html
4. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –≥–æ—Ç–æ–≤—ã–π HTML —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞–≥–∏–Ω–∞

```
1. PluginManager::loadPlugin("path")
   ‚îú‚îÄ –ü–∞—Ä—Å–∏—Ç—å manifest.json
   ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
   ‚îú‚îÄ –°–æ–∑–¥–∞—Ç—å Lua state
   ‚îî‚îÄ –ó–∞–≥—Ä—É–∑–∏—Ç—å init.lua

2. plugin.on("ready", callback) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
   ‚îú‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã
   ‚îú‚îÄ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
   ‚îî‚îÄ –í—ã–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ª–æ–≥

3. –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:
   ‚îú‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç Ctrl+Alt+1
   ‚îú‚îÄ executeCommand_selectFirst() –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   ‚îú‚îÄ ui.message() –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   ‚îî‚îÄ plugin.log() –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ª–æ–≥

4. –ü—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö:
   ‚îú‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª
   ‚îú‚îÄ MainWindow::onFileOpened() –≤—ã–∑—ã–≤–∞–µ—Ç notifyAfterFileOpen()
   ‚îú‚îÄ plugin.on("afterFileOpen", callback) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   ‚îî‚îÄ –ü–ª–∞–≥–∏–Ω –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É

5. –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   ‚îú‚îÄ plugin.on("shutdown", callback) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   ‚îú‚îÄ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   ‚îú‚îÄ –ó–∞–∫—Ä—ã—Ç—å Lua state
   ‚îî‚îÄ –ü–ª–∞–≥–∏–Ω –≤—ã–≥—Ä—É–∂–µ–Ω
```

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

1. **PLUGIN_SYSTEM_ANALYSIS.md** (300+ —Å—Ç—Ä–æ–∫)
   - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ Notepad++ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞–≥–∏–Ω–æ–≤
   - –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π Lua —Å–∏—Å—Ç–µ–º—ã NotepadNext
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤
   - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

2. **PLUGIN_ADAPTATION_GUIDE.md** (400+ —Å—Ç—Ä–æ–∫)
   - –ö–∞–∫ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã –∏–∑ Notepad++ –≤ NotepadNext
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã (C++ ‚Üí Lua)
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è 3 —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
   - FAQ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

3. **PLUGIN_IMPLEMENTATION_ROADMAP.md** (300+ —Å—Ç—Ä–æ–∫)
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
   - 4 —ç—Ç–∞–ø–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   - –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

4. **PLUGIN_INTEGRATION_GUIDE.md** (400+ —Å—Ç—Ä–æ–∫)
   - –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è MainWindow
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - Troubleshooting

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ PluginManager.cpp —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ PluginAPI.cpp —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (40+ —Ñ—É–Ω–∫—Ü–∏–π)
- ‚úÖ PluginManager.h –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ ComparePlus –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤
- ‚úÖ Converter –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤
- ‚úÖ NppExport –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤
- ‚úÖ MIMETools –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –ø–æ–¥—Ä–æ–±–Ω–∞—è
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ MainWindow (–≥–æ—Ç–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- ‚è≥ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ MainWindow**
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏–∑ PLUGIN_INTEGRATION_GUIDE.md
   - –û–±–Ω–æ–≤–∏—Ç—å NotepadNext.pro
   - –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø–ª–∞–≥–∏–Ω–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è

3. **–£–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
   - –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞–º–∏ (–≤–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å)
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å permission —Å–∏—Å—Ç–µ–º–∞
   - –î–æ–±–∞–≤–∏—Ç—å plugin marketplace/repository

---

## üìö –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [Lua 5.3 Manual](https://www.lua.org/manual/5.3/)
- [Notepad++ Plugin Interface](https://github.com/notepad-plus-plus/notepad-plus-plus/blob/master/PowerEditor/src/MISC/PluginsManager/PluginInterface.h)
- [Qt JSON Classes](https://doc.qt.io/qt-5/json.html)
- [Qt StandardPaths](https://doc.qt.io/qt-5/qstandardpaths.html)

---

## üìû Support

–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- –ö–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–≥–∏–Ω? ‚Üí PLUGIN_ADAPTATION_GUIDE.md
- –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å? ‚Üí PLUGIN_INTEGRATION_GUIDE.md  
- –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç? ‚Üí PLUGIN_SYSTEM_ANALYSIS.md
- –ö–∞–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å? ‚Üí PLUGIN_IMPLEMENTATION_ROADMAP.md

---

**–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ NotepadNext –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏! üéâ**
